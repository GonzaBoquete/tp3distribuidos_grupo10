{% extends "base.html" %}
{% block content %}
    <h2>Informe de Órdenes de Compra</h2>
    <form method="POST">
        <label for="codigoProducto">Código de Producto:</label>
        <input type="text" name="codigoProducto" id="codigoProducto" value="{{ form.codigoProducto.data }}">

        <label for="start_date">Fecha de Inicio:</label>
        <input type="date" name="start_date" id="start_date" value="{{ form.start_date.data }}">

        <label for="end_date">Fecha de Fin:</label>
        <input type="date" name="end_date" id="end_date" value="{{ form.end_date.data }}">

        <label for="estado">Estado:</label>
        <select name="estado" id="status">
            <option value="">Seleccione</option>
            <option value="pendiente" {% if form.estado.data == 'pendiente' %}selected{% endif %}>Pendiente</option>
            <option value="completed" {% if form.estado.data == 'completado' %}selected{% endif %}>Completada</option>
            <option value="cancelada" {% if form.estado.data == 'cancelada' %}selected{% endif %}>Cancelada</option>
        </select>

        <label for="codigoTienda">Código de Tienda:</label>
        <input type="text" name="codigoTienda" id="codigoTienda" value="{{ form.codigoTienda.data }}">

        <button type="submit">Filtrar</button>
    </form>

    <h3>Resultados</h3>
    {% if orders %}
        <table>
            <thead>
                <tr>
                    <th>Código de Producto</th>
                    <th>Estado</th>
                    <th>Código de Tienda</th>
                    <th>Total Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                    <tr>
                        <td>{{ order['codigoProducto'] }}</td>
                        <td>{{ order['estado'] }}</td>
                        <td>{{ order['codigoTienda'] }}</td>
                        <td>{{ order['cantidad'] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No se encontraron órdenes.</p>
    {% endif %}
{% endblock %}
