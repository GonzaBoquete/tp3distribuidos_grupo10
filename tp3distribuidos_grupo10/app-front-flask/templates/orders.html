{% extends "base.html" %}
{% block content %}
    <h2>Informe de Órdenes de Compra</h2>
    <form method="POST">
        <label for="product_code">Código de Producto:</label>
        <input type="text" name="product_code" id="product_code" value="{{ form.product_code.data }}">

        <label for="start_date">Fecha de Inicio:</label>
        <input type="date" name="start_date" id="start_date" value="{{ form.start_date.data }}">

        <label for="end_date">Fecha de Fin:</label>
        <input type="date" name="end_date" id="end_date" value="{{ form.end_date.data }}">

        <label for="status">Estado:</label>
        <select name="status" id="status">
            <option value="">Seleccione</option>
            <option value="pending" {% if form.status.data == 'pending' %}selected{% endif %}>Pendiente</option>
            <option value="completed" {% if form.status.data == 'completed' %}selected{% endif %}>Completada</option>
        </select>

        <label for="store_code">Código de Tienda:</label>
        <input type="text" name="store_code" id="store_code" value="{{ form.store_code.data }}">

        <button type="submit">Filtrar</button>
    </form>

    <h3>Resultados</h3>
    {% if orders %}
        <table>
            <thead>
                <tr>
                    <th>Código de Producto</th>
                    <th>Estado</th>
                    <th>Código de Tienda</th>
                    <th>Total Cantidad</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                    <tr>
                        <td>{{ order['product_code'] }}</td>
                        <td>{{ order['status'] }}</td>
                        <td>{{ order['store_code'] }}</td>
                        <td>{{ order['quantity'] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No se encontraron órdenes.</p>
    {% endif %}
{% endblock %}
